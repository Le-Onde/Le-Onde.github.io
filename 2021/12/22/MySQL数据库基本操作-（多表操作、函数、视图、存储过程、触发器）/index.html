

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/newcon.png">
  <link rel="icon" href="/img/newfav.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
  <title>MySQL数据库基本操作 - （多表操作、函数、视图、存储过程、触发器） - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.9","typing":{"enable":true,"typeSpeed":64,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Le Onde</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                主页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                种类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://img-blog.csdnimg.cn/20210421122657715.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NzYxMzEwNQ==,size_16,color_FFFFFF,t_70') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="MySQL数据库基本操作 - （多表操作、函数、视图、存储过程、触发器）">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-12-22 17:50" pubdate>
        December 22, 2021 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      11.4k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      149
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MySQL数据库基本操作 - （多表操作、函数、视图、存储过程、触发器）</h1>
            
            <div class="markdown-body">
              <h2 id="MySQL的多表操作"><a href="#MySQL的多表操作" class="headerlink" title="MySQL的多表操作"></a>MySQL的多表操作</h2><h3 id="1-多表关系"><a href="#1-多表关系" class="headerlink" title="1. 多表关系"></a>1. 多表关系</h3><p><strong>（1）介绍</strong></p>
<p>实际开发中，一个项目通常需要很多张表才能完成。例如：一个商城项目就需要分类表(category)、商品表(products)、订单表(orders)等多张表。且这些表的数据之间存在一定的关系，接下来我们将在单表的基础上，一起学习多表方面的知识。</p>
<p><img src="https://img-blog.csdnimg.cn/d05d25c402ef42e08ffc1b7cf53d80fd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_11,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><strong>（2）多表关系</strong></p>
<ul>
<li>一对一关系<ul>
<li>一个学生只有一张身份证</li>
<li>一张身份证只能对应一学生</li>
<li>在任一表中添加唯一外键，指向另一方主键，确保一对一关系。</li>
<li>一般一对一关系很少见，遇到一对一关系的表最好是合并表.</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/7b5672b474904a8297e6b9dc73ee5709.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<ul>
<li> 一对多/多对一关系</li>
<li>一个部门有多个员工，一个员工只能对应一个部门</li>
<li>实现原则：在多的一方建立外键，指向一的一方的主键</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/c2519b885af44befbaef459fe74662de.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>多对多关系<ul>
<li>一个学生可以选择很多门课程，一个课程也可以被很多学生选择</li>
<li>多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，将多对多的关系，拆成一对多的关系，中间表至少要有两个外键，这两个外键分别指向原来的那两张表的主键</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/1d5c7bd5adf94df0b0194bcce4e0fe75.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><strong>（3）外键约束</strong></p>
<p><strong>介绍</strong></p>
<p>MySQL 外键约束（FOREIGN KEY）是表的一个特殊字段，经常与主键约束一起使用。对于两个具有关联关系的表而言，相关联字段中主键所在的表就是主表（父表），外键所在的表就是从表（子表）。</p>
<p>外键用来建立主表与从表的关联关系，为两个表的数据建立连接，约束两个表中数据的一致性和完整性。比如，一个水果摊，只有苹果、桃子、李子、西瓜等 4 种水果，那么，你来到水果摊要买水果就只能选择苹果、桃子、李子和西瓜，其它的水果都是不能购买的。</p>
<p><img src="https://img-blog.csdnimg.cn/eaa0bf952855478ebd88f2f0081f0456.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><strong>特点</strong></p>
<p>定义一个外键时，需要遵守下列规则</p>
<ul>
<li>主表必须已经存在于数据库中，或者是当前正在创建的表。 </li>
<li>必须为主表定义主键。</li>
<li>主键不能包含空值，但允许在外键中出现空值。也就是说，只要外键的每个非空值出现在指定的主键中，这 个外键的内容就是正确的。    </li>
<li>在主表的表名后面指定列名或列名的组合。这个列或列的组合必须是主表的主键或候选键。 </li>
<li>外键中列的数目必须和主表的主键中列的数目相同。  </li>
<li>外键中列的数据类型必须和主表主键中对应列的数据类型相同。</li>
</ul>
<h4 id="操作-创建外键约束"><a href="#操作-创建外键约束" class="headerlink" title="操作 - 创建外键约束"></a>操作 - 创建外键约束</h4><ul>
<li>方式1 - 在创建表时设置外键约束</li>
</ul>
<p>在 create table 语句中，通过 foreign key 关键字来指定外键，具体的语法格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">[constraint &lt;外键名&gt;] foreign key 字段名 [，字段名2，…] references &lt;主表名&gt; 主键列1 [，主键列2，…]<br></code></pre></td></tr></table></figure>

<p>实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create database mydb3; <br>use mydb3;<br>-- 创建部门表<br>create table if not exists dept(<br>  deptno varchar(20) primary key ,  -- 部门号<br>  name varchar(20) -- 部门名字<br>);<br> <br>create table if not exists emp(<br>  eid varchar(20) primary key , -- 员工编号<br>  ename varchar(20), -- 员工名字<br>  age int,  -- 员工年龄<br>  dept_id varchar(20),  -- 员工所属部门<br>  constraint emp_fk foreign key (dept_id) references dept (deptno) –- 外键约束<br>);<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/116d3f380fd84c8393a1cde5ae9d2556.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>方式2 - 在创建表时设置外键约束</li>
</ul>
<p>外键约束也可以在修改表时添加，但是添加外键约束的前提是：从表中外键列中的数据必须与主表中主键列中的数据一致或者是没有数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table &lt;数据表名&gt; add constraint &lt;外键名&gt; foreign key(&lt;列名&gt;) references <br>&lt;主表名&gt; (&lt;列名&gt;);<br></code></pre></td></tr></table></figure>

<p>实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 创建部门表<br>create table if not exists dept2(<br>  deptno varchar(20) primary key ,  -- 部门号<br>  name varchar(20) -- 部门名字<br>);<br>-- 创建员工表<br>create table if not exists emp2(<br>  eid varchar(20) primary key , -- 员工编号<br>  ename varchar(20), -- 员工名字<br>  age int,  -- 员工年龄<br>  dept_id varchar(20)  -- 员工所属部门<br> <br>);<br>-- 创建外键约束<br>alter table emp2 add constraint dept_id_fk foreign key(dept_id) references dept2 (deptno);<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/5c0212c4c40340b88e91f6362eed829f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<h4 id="操作-在外键约束下的数据操作"><a href="#操作-在外键约束下的数据操作" class="headerlink" title="操作 - 在外键约束下的数据操作"></a>操作 - 在外键约束下的数据操作</h4><ol>
<li>数据插入</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mysql"> -- 1、添加主表数据<br> -- 注意必须先给主表添加数据<br>insert into dept values(&#39;1001&#39;,&#39;研发部&#39;);<br>insert into dept values(&#39;1002&#39;,&#39;销售部&#39;);<br>insert into dept values(&#39;1003&#39;,&#39;财务部&#39;);<br>insert into dept values(&#39;1004&#39;,&#39;人事部’);<br>-- 2、添加从表数据<br>  -- 注意给从表添加数据时，外键列的值不能随便写，必须依赖主表的主键列<br>insert into emp values(&#39;1&#39;,&#39;乔峰&#39;,20, &#39;1001&#39;);<br>insert into emp values(&#39;2&#39;,&#39;段誉&#39;,21, &#39;1001&#39;);<br>insert into emp values(&#39;3&#39;,&#39;虚竹&#39;,23, &#39;1001&#39;);<br>insert into emp values(&#39;4&#39;,&#39;阿紫&#39;,18, &#39;1002&#39;);<br>insert into emp values(&#39;5&#39;,&#39;扫地僧&#39;,35, &#39;1002&#39;);<br>insert into emp values(&#39;6&#39;,&#39;李秋水&#39;,33, &#39;1003&#39;);<br>insert into emp values(&#39;7&#39;,&#39;鸠摩智&#39;,50, &#39;1003&#39;); <br>insert into emp values(&#39;8&#39;,&#39;天山童姥&#39;,60, &#39;1005&#39;);  -- 不可以<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>删除数据</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 3、删除数据<br> &#x2F;*<br>   注意：<br>       1：主表的数据被从表依赖时，不能删除，否则可以删除<br>       2: 从表的数据可以随便删除<br> *&#x2F;<br>delete from dept where deptno &#x3D; &#39;1001&#39;; -- 不可以删除<br>delete from dept where deptno &#x3D; &#39;1004&#39;; -- 可以删除<br>delete from emp where eid &#x3D; &#39;7&#39;; -- 可以删除<br></code></pre></td></tr></table></figure>

<h4 id="操作-删除外键约束"><a href="#操作-删除外键约束" class="headerlink" title="操作 - 删除外键约束"></a>操作 - 删除外键约束</h4><p>当一个表中不需要外键约束时，就需要从表中将其删除。外键一旦删除，就会解除主表和从表间的关联关系</p>
<p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Mysql">alter table &lt;表名&gt; drop foreign key &lt;外键约束名&gt;;<br></code></pre></td></tr></table></figure>

<p>实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table emp2 drop foreign key dept_id_fk;<br></code></pre></td></tr></table></figure>

<p><strong>（4）外键约束 - 多对多关系</strong></p>
<p>在多对多关系中，A表的一行对应B的多行，B表的一行对应A表的多行，我们要新增加一个中间表，来建立多对多关系。</p>
<p><img src="https://img-blog.csdnimg.cn/d24c842686f54f2198a165c4f0080b44.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 学生表和课程表(多对多)<br>  -- 1 创建学生表student(左侧主表)<br>   create table if not exists student(<br>    sid int primary key auto_increment,<br>    name varchar(20),<br>    age int,<br>    gender varchar(20)<br>   );<br>  -- 2 创建课程表course(右侧主表)<br>  create table course(<br>   cid  int primary key auto_increment,<br>   cidname varchar(20)<br>  );<br>-- 3创建中间表student_course&#x2F;score(从表)<br>  create table score(<br>    sid int,<br>    cid int,<br>    score double<br>  );<br>    <br>-- 4建立外键约束(2次)<br> <br>alter table score add foreign key(sid) references student(sid);<br>alter table score add foreign key(cid) references course(cid);<br> <br>-- 5给学生表添加数据<br>insert into student values(1,&#39;小龙女&#39;,18,&#39;女&#39;),(2,&#39;阿紫&#39;,19,&#39;女&#39;),(3,&#39;周芷若&#39;,20,&#39;男&#39;);<br>-- 6给课程表添加数据<br>insert into course values(1,&#39;语文&#39;),(2,&#39;数学&#39;),(3,&#39;英语&#39;);<br>-- 7给中间表添加数据<br>insert into score values(1,1),(1,2),(2,1),(2,3),(3,2),(3,3);<br></code></pre></td></tr></table></figure>

<h3 id="2-多表联合查询"><a href="#2-多表联合查询" class="headerlink" title="2.多表联合查询"></a>2.多表联合查询</h3><p><strong>(1)介绍</strong></p>
<p>多表查询就是同时查询两个或者两个以上的表，因为有的时候用户在看数据的时候，需要显示的数据来自多张表</p>
<p>多表查询有以下分类</p>
<ul>
<li>交叉连接查询 [产生笛卡尔积，了解]<ul>
<li>语法：select * from A，B</li>
</ul>
</li>
<li>内连接查询（使用的关键字 inner join – inner可以省略）<ul>
<li>隐式内连接（SQL92标准）：select * from A，B where 条件；</li>
<li>显示内连接（SQL99标准）：select * from A inner join B on 条件；</li>
</ul>
</li>
<li>外连接查询（使用的关键字 outer join – outer可以省略）<ul>
<li>左外连接：left outer join             <ul>
<li>select * from A left outer join B on 条件;</li>
</ul>
</li>
<li>右外连接：right outer join             <ul>
<li>select * from A right outer join B on 条件;</li>
</ul>
</li>
<li>满外连接: full outer join              <ul>
<li>select * from A full outer join B on 条件;</li>
</ul>
</li>
</ul>
</li>
<li>子查询<ul>
<li>select的嵌套</li>
</ul>
</li>
<li>表字关联<ul>
<li>将一张表当成多张表来用</li>
</ul>
</li>
</ul>
<h4 id="（1）交叉连接查询"><a href="#（1）交叉连接查询" class="headerlink" title="（1）交叉连接查询"></a>（1）交叉连接查询</h4><ul>
<li>交叉连接查询返回被连接的两个表所有数据行的笛卡尔积</li>
<li>笛卡尔积可以理解为一张表的每一行去和另外一张表的任意一行进行匹配</li>
<li>假如A表有m行数据，B表有n行数据，则返回m*n行数据</li>
<li>笛卡尔积会产生很多冗余的数据，后期的其他查询可以在该集合的基础上进行条件筛选</li>
</ul>
<p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select * from 表1,表2,表3….; <br></code></pre></td></tr></table></figure>

<p><strong>实现</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 交叉连接查询<br>select * from dept3,emp3;<br></code></pre></td></tr></table></figure>

<p><strong>结果</strong></p>
<p><img src="https://img-blog.csdnimg.cn/70d62a1e761c4529b04571af096ba8a9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_11,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<h4 id="（2）内连接查询"><a href="#（2）内连接查询" class="headerlink" title="（2）内连接查询"></a>（2）内连接查询</h4><p>内连接查询求多张表的交集</p>
<p><img src="https://img-blog.csdnimg.cn/01f218b2554f485b86433080a0ad7f43.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_7,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">隐式内连接（SQL92标准）：select * from A,B where 条件; <br>显示内连接（SQL99标准）：select * from A inner join B on 条件;<br></code></pre></td></tr></table></figure>

<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询每个部门的所属员工<br>select * from dept3,emp3 where dept3.deptno &#x3D; emp3.dept_id;<br>select * from dept3 inner join emp3 on dept3.deptno &#x3D; emp3.dept_id;<br> <br>-- 查询研发部和销售部的所属员工<br>select * from dept3,emp3 where dept3.deptno &#x3D; emp3.dept_id and name in( &#39;研发部&#39;,&#39;销售部&#39;);<br>select * from dept3 join emp3 on dept3.deptno &#x3D; emp3.dept_id and name in( &#39;研发部&#39;,&#39;销售部&#39;);<br> <br>-- 查询每个部门的员工数,并升序排序<br>select deptno,count(1) as total_cnt from dept3,emp3 where dept3.deptno &#x3D; emp3.dept_id group by deptno order by total_cnt;<br> <br>select deptno,count(1) as total_cnt from dept3 join emp3 on dept3.deptno &#x3D; emp3.dept_id group by deptno order by total_cnt;<br> <br>-- 查询人数大于等于3的部门，并按照人数降序排序<br>select deptno,count(1) as total_cnt from dept3,emp3 where dept3.deptno &#x3D; emp3.dept_id group by deptno having total_cnt &gt;&#x3D; 3 order by total_cnt desc;<br> <br>select deptno,count(1) as total_cnt from dept3 join emp3 on dept3.deptno &#x3D; emp3.dept_id group by deptno having total_cnt &gt;&#x3D; 3 order by total_cnt desc;<br></code></pre></td></tr></table></figure>

<h4 id="（3）外连接查询"><a href="#（3）外连接查询" class="headerlink" title="（3）外连接查询"></a>（3）外连接查询</h4><p>外连接分为左外连接（left outer join）、右外连接(right outer join)，满外连接(full outer join)。</p>
<p><strong>注意：oracle里面有full join,可是在mysql对full join支持的不好。我们可以使用union来达到目的。</strong></p>
<p><strong>格式</strong></p>
<p>左外连接：left outer join</p>
<ul>
<li><p>左外连接：left outer join</p>
<p>select * from A left outer join B on 条件;  </p>
</li>
<li><p>右外连接：right outer join</p>
<p>select * from A right outer join B on 条件;</p>
</li>
<li><p>满外连接：full outer join</p>
<p> select * from A full outer join B on 条件;</p>
</li>
</ul>
<p> <img src="https://img-blog.csdnimg.cn/38e619f057304025bffe59c5d094b157.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_6,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://img-blog.csdnimg.cn/70a3e7dab4b243908dfb9bfe43482d92.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_6,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://img-blog.csdnimg.cn/80887e99259b4f15ab8877ee5573b546.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_7,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 外连接查询<br>-- 查询哪些部门有员工，哪些部门没有员工<br>use mydb3;<br>select * from dept3 left outer join emp3 on dept3.deptno &#x3D; emp3.dept_id;<br> <br>-- 查询哪些员工有对应的部门，哪些没有<br>select * from dept3 right outer join emp3 on dept3.deptno &#x3D; emp3.dept_id;<br> <br> <br>-- 使用union关键字实现左外连接和右外连接的并集<br>select * from dept3 left outer join emp3 on dept3.deptno &#x3D; emp3.dept_id<br>union <br>select * from dept3 right outer join emp3 on dept3.deptno &#x3D; emp3.dept_id;<br></code></pre></td></tr></table></figure>

<h4 id="（4）子查询"><a href="#（4）子查询" class="headerlink" title="（4）子查询"></a>（4）子查询</h4><p><strong>介绍</strong></p>
<p>子查询就是指的在一个完整的查询语句中，嵌套若干个不同功能的小查询，从而一起完成复杂查询的一种编写形式，通俗一点就是包含select嵌套的查询</p>
<p><strong>特点</strong></p>
<p>子查询可以返回的数据类型一共分为四种：</p>
<ol>
<li>单行单列：返回的是一个具体列的内容，可以理解为一个单值数据；</li>
<li>单行多列：返回一行数据中多个列的内容；</li>
<li>多行单列：返回多行记录之中同一列的内容，相当于给出了一个操作范围；</li>
<li>多行多列：查询返回的结果是一张临时表</li>
</ol>
<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询年龄最大的员工信息，显示信息包含员工号、员工名字，员工年龄<br>select eid,ename,age from emp3 where age &#x3D; (select max(age) from emp3);<br> <br> <br>-- 查询年研发部和销售部的员工信息，包含员工号、员工名字<br>select eid,ename,t.name from emp3 where dept_id in (select deptno,name from dept3 where name &#x3D; &#39;研发部&#39; or name &#x3D; &#39;销售部&#39;) ;<br> <br> <br>-- 查询研发部20岁以下的员工信息,包括员工号、员工名字，部门名字<br>select eid,age,ename,name from (select * from dept where name &#x3D; &#39;研发部 &#39;)t1,(select * from emp3 where age &lt;20)t2<br></code></pre></td></tr></table></figure>

<h5 id="子查询关键字"><a href="#子查询关键字" class="headerlink" title="子查询关键字"></a>子查询关键字</h5><p>在子查询中，有一些常用的逻辑关键字，这些关键字可以给我们提供更丰富的查询功能，主要关键字如下:</p>
<ol>
<li>ALL关键字</li>
<li>ANY关键字</li>
<li>SOME关键字</li>
<li>IN关键字</li>
<li>EXISTS关键字</li>
</ol>
<h5 id="子查询关键字-ALL"><a href="#子查询关键字-ALL" class="headerlink" title="子查询关键字 - ALL"></a>子查询关键字 - ALL</h5><p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select …from …where c &gt; all(查询语句)<br>--等价于：<br>select ...from ... where c &gt; result1 and c &gt; result2 and c &gt; result3<br></code></pre></td></tr></table></figure>

<p><strong>特点</strong></p>
<ul>
<li>ALL：与子查询返回的所有值比较为true 则返回true</li>
<li>ALL可以与=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;结合是来使用，分别表示等于、大于、大于等于、小于、小于等于、不等于其中的其中的所有数据。</li>
<li>ALL表示指定列中的值必须要大于子查询集的每一个值，即必须要大于子查询集的最大值；如果是小于号即小于子查询集的最小值。同理可以推出其它的比较运算符的情况。</li>
</ul>
<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询年龄大于‘1003’部门所有年龄的员工信息<br>select * from emp3 where age &gt; all(select age from emp3 where dept_id &#x3D; &#39;1003’);<br>-- 查询不属于任何一个部门的员工信息 <br>select * from emp3 where dept_id !&#x3D; all(select deptno from dept3); <br></code></pre></td></tr></table></figure>

<h5 id="子查询关键字-ANY和SOME"><a href="#子查询关键字-ANY和SOME" class="headerlink" title="子查询关键字 - ANY和SOME"></a>子查询关键字 - ANY和SOME</h5><p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select …from …where c &gt; any(查询语句)<br>--等价于：<br>select ...from ... where c &gt; result1 or c &gt; result2 or c &gt; result3<br></code></pre></td></tr></table></figure>

<p><strong>特点</strong></p>
<ul>
<li>ANY与子查询返回的任何值比较为true，则返回true</li>
<li>ANY可以与=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;结合是来使用，分别表示等于、大于、大于等于、小于、小于等于、不等于其中的其中的任何一个数据。</li>
<li>表示制定列中的值要大于子查询中的任意一个值，即必须要大于子查询集中的最小值。同理可以推出其它的比较运算符的情况。</li>
<li><strong>SOME和ANY的作用一样，SOME可以理解为ANY的别名</strong></li>
</ul>
<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询年龄大于‘1003’部门任意一个员工年龄的员工信息<br>select * from emp3 where age &gt; any(select age from emp3 where dept_id &#x3D; &#39;1003’);<br></code></pre></td></tr></table></figure>

<h5 id="子查询关键字-IN"><a href="#子查询关键字-IN" class="headerlink" title="子查询关键字 - IN"></a>子查询关键字 - IN</h5><p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select …from …where c in(查询语句)<br>--等价于：<br>select ...from ... where c &#x3D; result1 or c &#x3D; result2 or c &#x3D; result3<br></code></pre></td></tr></table></figure>

<p><strong>特点</strong></p>
<ul>
<li>IN关键字，用于判断某个记录的值，是否在指定的集合中</li>
<li>在IN关键字前边加上not可以将条件反过来</li>
</ul>
<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询研发部和销售部的员工信息，包含员工号、员工名字<br>select eid,ename,t.name from emp3 where dept_id in (select deptno from dept3 where name &#x3D; &#39;研发部&#39; or name &#x3D; &#39;销售部&#39;) ;<br></code></pre></td></tr></table></figure>

<h5 id="子查询关键字-EXISTS"><a href="#子查询关键字-EXISTS" class="headerlink" title="子查询关键字 - EXISTS"></a>子查询关键字 - EXISTS</h5><p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select …from …where exists(查询语句)<br></code></pre></td></tr></table></figure>

<p><strong>特点</strong></p>
<ul>
<li>该子查询如果“有数据结果”(至少返回一行数据)， 则该EXISTS() 的结果为“true”，外层查询执行</li>
</ul>
<ul>
<li>该子查询如果“没有数据结果”（没有任何数据返回），则该EXISTS()的结果为“false”，外层查询不执行</li>
<li>EXISTS后面的子查询不返回任何实际数据，只返回真或假，当返回真时 where条件成立</li>
<li>注意，EXISTS关键字，比IN关键字的运算效率高，因此，在实际开发中，特别是大数据量时，推荐使用EXISTS关键字</li>
</ul>
<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询公司是否有大于60岁的员工，有则输出<br>select * from emp3 a where exists(select * from emp3 b where a.age &gt; 60);<br> <br>-- 查询有所属部门的员工信息<br>select * from emp3 a where exists(select * from dept3 b where a.dept_id &#x3D; b.deptno);<br></code></pre></td></tr></table></figure>

<h5 id="自关联查询"><a href="#自关联查询" class="headerlink" title="自关联查询"></a>自关联查询</h5><p><strong>概念</strong></p>
<p>MySQL有时在信息查询时需要进行对表自身进行关联查询，即一张表自己和自己关联，一张表当成多张表来用。<strong>注意自关联时表必须给表起别名。</strong></p>
<p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select 字段列表 from 表1 a , 表1 b where 条件;<br>或者 <br>select 字段列表 from 表1 a [left] join 表1 b on 条件;<br></code></pre></td></tr></table></figure>

<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 创建表,并建立自关联约束<br>create table t_sanguo(<br>    eid int primary key ,<br>    ename varchar(20),<br>    manager_id int,<br> foreign key (manager_id) references t_sanguo (eid)  -- 添加自关联约束<br>);<br></code></pre></td></tr></table></figure>

<p><strong>操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 添加数据 <br>insert into t_sanguo values(1,&#39;刘协&#39;,NULL);<br>insert into t_sanguo values(2,&#39;刘备&#39;,1);<br>insert into t_sanguo values(3,&#39;关羽&#39;,2);<br>insert into t_sanguo values(4,&#39;张飞&#39;,2);<br>insert into t_sanguo values(5,&#39;曹操&#39;,1);<br>insert into t_sanguo values(6,&#39;许褚&#39;,5);<br>insert into t_sanguo values(7,&#39;典韦&#39;,5);<br>insert into t_sanguo values(8,&#39;孙权&#39;,1);<br>insert into t_sanguo values(9,&#39;周瑜&#39;,8);<br>insert into t_sanguo values(10,&#39;鲁肃&#39;,8);<br> <br>-- 进行关联查询<br>-- 1.查询每个三国人物及他的上级信息，如:  关羽  刘备 <br>select * from t_sanguo a, t_sanguo b where a.manager_id &#x3D; b.eid;<br></code></pre></td></tr></table></figure>

<h2 id="MySQL的函数"><a href="#MySQL的函数" class="headerlink" title="MySQL的函数"></a>MySQL的函数</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h3><p>在MySQL中，为了提高代码重用性和隐藏实现细节， MySQL提供了很多函数。函数可以理解为别人封装好的模板代码</p>
<h3 id="2-分类"><a href="#2-分类" class="headerlink" title="2.分类"></a>2.分类</h3><p>在MySQL中，函数非常多，主要可以分为以下几个</p>
<ul>
<li>聚合函数</li>
<li>数学函数</li>
<li>字符串函数</li>
<li>日期函数</li>
<li>控制流函数</li>
<li>窗口函数</li>
</ul>
<h3 id="3-聚合函数"><a href="#3-聚合函数" class="headerlink" title="3.聚合函数"></a>3.聚合函数</h3><p><strong>（1）概述</strong></p>
<ul>
<li>在MySQL中，聚合函数主要由：count,sum,min,max,avg,这些聚合函数我们之前都学过，不再重复。这里我们学习另外一个函数：group_concat()，该函数用户实现行的合并</li>
<li>group_concat() 函数首先根据 group by 指定的列进行分组，并且用分隔符分隔，将同一个分组中的值连接起来，返回一个字符串结果</li>
</ul>
<p><strong>（2）格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs MySQL">group_concat([distinct] 字段名 [order by 排序字段 asc&#x2F;desc] [separator &#39;分隔符&#39;])<br></code></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>使用distinct可以排除重复值</li>
<li>如果需要对结果中的值进行排序，可以使用order by子句</li>
<li>separator是一个字符串值，默认为逗号</li>
</ol>
<p><strong>（3）操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create database mydb4;<br>use mydb4;<br> <br>create table emp(<br>    emp_id int primary key auto_increment comment &#39;编号&#39;,<br>    emp_name char(20) not null default &#39;&#39; comment &#39;姓名&#39;,<br>    salary decimal(10,2) not null default 0 comment &#39;工资&#39;,<br>    department char(20) not null default &#39;&#39; comment &#39;部门&#39;<br>);<br> <br>insert into emp(emp_name,salary,department) <br>values(&#39;张晶晶&#39;,5000,&#39;财务部&#39;),(&#39;王飞飞&#39;,5800,&#39;财务部&#39;),(&#39;赵刚&#39;,6200,&#39;财务部&#39;),(&#39;刘小贝&#39;,5700,&#39;人事部&#39;),<br>(&#39;王大鹏&#39;,6700,&#39;人事部&#39;),(&#39;张小斐&#39;,5200,&#39;人事部&#39;),(&#39;刘云云&#39;,7500,&#39;销售部&#39;),(&#39;刘云鹏&#39;,7200,&#39;销售部&#39;),<br>(&#39;刘云鹏&#39;,7800,&#39;销售部&#39;);<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 将所有员工的名字合并成一行 <br>select group_concat(emp_name) from emp;<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/09da03d5d9aa41be9cc4db8dd6d481fa.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_13,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 指定分隔符合并 <br>select department,group_concat(emp_name separator &#39;;&#39; ) from emp group by department; <br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/f73d33c3dce74c518a853882a0824e0e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_10,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 指定排序方式和分隔符 <br>select department,group_concat(emp_name order by salary desc separator &#39;;&#39; ) from emp group by department;<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/d84f2771fb914dc1b108734544a1dd4e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_9,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<h3 id="4-数学函数"><a href="#4-数学函数" class="headerlink" title="4.数学函数"></a>4.数学函数</h3><table>
<thead>
<tr>
<th>函数名</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>ABS(x)</td>
<td>返回x的绝对值</td>
<td>返回 -1 的绝对值： SELECT ABS(-1) – 返回1</td>
</tr>
<tr>
<td>CEIL(x)</td>
<td>返回大于或等于x的最小整数</td>
<td>SELECT CEIL(1.5) – 返回2</td>
</tr>
<tr>
<td>FLOOR(x)</td>
<td>返回小于或等于x的最大整数</td>
<td>SELECT FLOOR(1.5) – 返回1</td>
</tr>
<tr>
<td>GREATEST(expr1,expr2,expr3,…)</td>
<td>返回列表中的最大值</td>
<td>SELECT GREATEST(“Google”, “Runoob”, “Apple”);   – Runoob</td>
</tr>
<tr>
<td>LEAST(expr1,expr2,expr3,..)</td>
<td>返回列表中的最小值</td>
<td>SELECT LEAST(“Google”, “Runoob”, “Apple”);   – Apple</td>
</tr>
<tr>
<td>MAX(x)</td>
<td>返回字段 expression 中的最大值</td>
<td>SELECT MAX(Price) AS LargestPrice FROM Products;</td>
</tr>
<tr>
<td>MIN(x)</td>
<td>返回字段 expression 中的最小值</td>
<td>SELECT MIN(Price) AS MinPrice FROM Products;</td>
</tr>
<tr>
<td>MOD(x,y)</td>
<td>返回 x 除以 y 以后的余数</td>
<td>SELECT MOD(5,2) – 1</td>
</tr>
<tr>
<td>PI(x)</td>
<td>返回圆周率(3.141593)</td>
<td>SELECT PI() –3.141593</td>
</tr>
<tr>
<td>POW(x,y)</td>
<td>返回 x 的 y 次方</td>
<td>SELECT POW(2,3) – 8</td>
</tr>
<tr>
<td>RAND()</td>
<td>返回 0 到 1 的随机数</td>
<td>SELECT RAND() –0.93099315644334</td>
</tr>
<tr>
<td>ROUND(x)</td>
<td>返回离 x 最近的整数（遵循四舍五入）</td>
<td>SELECT ROUND(1.23456) –1</td>
</tr>
<tr>
<td>ROUND(x,y)</td>
<td>返回指定位数的小数（遵循四舍五入）</td>
<td>SELECT ROUND(1.23456,3) –1.235</td>
</tr>
<tr>
<td>TRUNCATE(x,y)</td>
<td>返回数值 x 保留到小数点后 y 位的值（与 ROUND 最大的区别是不会进行四舍五入）</td>
<td>SELECT TRUNCATE(1.23456,3) – 1.234</td>
</tr>
</tbody></table>
<h3 id="5-字符串函数"><a href="#5-字符串函数" class="headerlink" title="5.字符串函数"></a>5.字符串函数</h3><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>描述</strong></th>
<th><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td>CHAR_LENGTH(s)</td>
<td>返回字符串 s 的字符数</td>
<td>SELECT CHAR_LENGTH(“RUNOOB”) AS LengthOfString;</td>
</tr>
<tr>
<td>CHARACTER_LENGTH(s)</td>
<td>返回字符串 s 的字符数</td>
<td>SELECT CHARACTER_LENGTH(“RUNOOB”) AS LengthOfString;</td>
</tr>
<tr>
<td>CONCAT(s1,s2…sn)</td>
<td>字符串 s1,s2 等多个字符串合并为一个字符串</td>
<td>SELECT CONCAT(“SQL “, “Runoob “, “Gooogle “, “Facebook”) AS ConcatenatedString;</td>
</tr>
<tr>
<td>CONCAT_WS(x, s1,s2…sn)</td>
<td>同 CONCAT(s1,s2,…) 函数， 但是每个字符串之间要加上 x，x 可以是分隔符</td>
<td>SELECT CONCAT_WS(“-“, “SQL”, “Tutorial”, “is”, “fun!”)AS ConcatenatedString;</td>
</tr>
<tr>
<td>FIELD(s,s1,s2…)</td>
<td>返回第一个字符串 s 在字符串列表(s1,s2…)中的位置</td>
<td>SELECT FIELD(“c”, “a”, “b”, “c”, “d”, “e”);</td>
</tr>
<tr>
<td>LTRIM(s)</td>
<td>去掉字符串 s 开始处的空格</td>
<td>SELECT LTRIM(“    RUNOOB”) AS LeftTrimmedString;– RUNOOB</td>
</tr>
<tr>
<td>MID(s,n,len)</td>
<td>从字符串 s 的 n 位置截取长度为 len 的子字符串， 同 SUBSTRING(s,n,len)</td>
<td>SELECT MID(“RUNOOB”, 2, 3) AS ExtractString; – UNO</td>
</tr>
<tr>
<td>POSITION(s1 IN s)</td>
<td>从字符串 s 中获取 s1 的开始位置</td>
<td>SELECT POSITION(‘b’ in ‘abc’) – 2</td>
</tr>
<tr>
<td>REPLACE(s,s1,s2)</td>
<td>将字符串 s2 替代字符串 s 中的字符串 s1</td>
<td>SELECT REPLACE(‘abc’,’a’,’x’) –xbc</td>
</tr>
<tr>
<td>REVERSE(s)</td>
<td>将字符串s的顺序反过来</td>
<td>SELECT REVERSE(‘abc’) – cba</td>
</tr>
<tr>
<td>RIGHT(s,n)</td>
<td>返回字符串 s 的后 n 个字符</td>
<td>SELECT RIGHT(‘runoob’,2) – ob</td>
</tr>
<tr>
<td>RTRIM(s)</td>
<td>去掉字符串 s 结尾处的空格</td>
<td>SELECT RTRIM(“RUNOOB     “) AS RightTrimmedString;   – RUNOOB</td>
</tr>
<tr>
<td>STRCMP(s1,s2)</td>
<td>比较字符串 s1 和 s2，如果 s1 与 s2 相等返回 0 ， 如果 s1&gt;s2 返回 1，如果 s1&lt;s2 返回 -1</td>
<td>SELECT STRCMP(“runoob”, “runoob”);  – 0</td>
</tr>
<tr>
<td>SUBSTR(s, start, length)</td>
<td>从字符串 s 的 start 位置截取长度为 length 的子字符串</td>
<td>SELECT SUBSTR(“RUNOOB”, 2, 3) AS ExtractString; – UNO</td>
</tr>
<tr>
<td>SUBSTRING(s, start, length)</td>
<td>从字符串 s 的 start 位置截取长度为 length 的子字符串</td>
<td>SELECT SUBSTRING(“RUNOOB”, 2, 3) AS ExtractString; – UNO</td>
</tr>
<tr>
<td>TRIM(s)</td>
<td>去掉字符串 s 开始和结尾处的空格</td>
<td>SELECT TRIM(‘    RUNOOB    ‘) AS TrimmedString;</td>
</tr>
<tr>
<td>UCASE(s)</td>
<td>将字符串转换为大写</td>
<td>SELECT UCASE(“runoob”); – RUNOOB</td>
</tr>
<tr>
<td>UPPER(s)</td>
<td>将字符串转换为大写</td>
<td>SELECT UPPER(“runoob”); – RUNOOB</td>
</tr>
<tr>
<td>LCASE(s)</td>
<td>将字符串 s 的所有字母变成小写字母</td>
<td>SELECT LCASE(‘RUNOOB’) – runoob</td>
</tr>
<tr>
<td>LOWER(s)</td>
<td>将字符串 s 的所有字母变成小写字母</td>
<td>SELECT LOWER(‘RUNOOB’) – runoob</td>
</tr>
</tbody></table>
<h3 id="6-日期函数"><a href="#6-日期函数" class="headerlink" title="6.日期函数"></a>6.日期函数</h3><table>
<thead>
<tr>
<th><strong>函数名</strong></th>
<th><strong>描述</strong></th>
<th><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td>UNIX_TIMESTAMP()</td>
<td>返回从1970-01-01 00:00:00到当前毫秒值</td>
<td>select UNIX_TIMESTAMP() -&gt; 1632729059</td>
</tr>
<tr>
<td>UNIX_TIMESTAMP(DATE_STRING)</td>
<td>将制定日期转为毫秒值时间戳</td>
<td>SELECT UNIX_TIMESTAMP(‘2011-12-07 13:01:03’);</td>
</tr>
<tr>
<td>FROM_UNIXTIME(BIGINT UNIXTIME[, STRING FORMAT])</td>
<td>将毫秒值时间戳转为指定格式日期</td>
<td>SELECT FROM_UNIXTIME(1598079966,’%Y-%m-%d %H:%i:%s’); (1598079966,’%Y-%m-%d %H:%i:%s’); -&gt; 2020-08-22 15-06-06</td>
</tr>
<tr>
<td>CURDATE()</td>
<td>返回当前日期</td>
<td>SELECT CURDATE();</td>
</tr>
<tr>
<td>CURRENT_DATE()</td>
<td>返回当前日期</td>
<td>SELECT CURRENT_DATE();</td>
</tr>
<tr>
<td>CURRENT_TIME</td>
<td>返回当前时间</td>
<td>SELECT CURRENT_TIME();</td>
</tr>
<tr>
<td>CURTIME()</td>
<td>返回当前时间</td>
<td>SELECT CURTIME();</td>
</tr>
<tr>
<td>CURRENT_TIMESTAMP()</td>
<td>返回当前日期和时间</td>
<td>SELECT CURRENT_TIMESTAMP()</td>
</tr>
<tr>
<td>DATE()</td>
<td>从日期或日期时间表达式中提取日期值</td>
<td>SELECT DATE(“2017-06-15”);</td>
</tr>
<tr>
<td>DATEDIFF(d1,d2)</td>
<td>计算日期 d1-&gt;d2 之间相隔的天数</td>
<td>SELECT DATEDIFF(‘2001-01-01’,’2001-02-02’)</td>
</tr>
<tr>
<td>TIMEDIFF(time1, time2)</td>
<td>计算时间差值</td>
<td>SELECT TIMEDIFF(“13:10:11”, “13:10:10”);</td>
</tr>
<tr>
<td>DATE_FORMAT(d,f)</td>
<td>按表达式 f的要求显示日期 d</td>
<td>SELECT DATE_FORMAT(‘2011-11-11 11:11:11’,’%Y-%m-%d %r’)</td>
</tr>
<tr>
<td>STR_TO_DATE(string, format_mask)</td>
<td>将字符串转变为日期</td>
<td>SELECT STR_TO_DATE(“August 10 2017”, “%M %d %Y”);</td>
</tr>
<tr>
<td>DATE_SUB(date,INTERVAL expr type)</td>
<td>函数从日期减去指定的时间间隔。</td>
<td>SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders</td>
</tr>
<tr>
<td>ADDDATE/DATE_ADD(d，INTERVAL expr type)</td>
<td>计算起始日期 d 加上一个时间段后的日期，type 值可以是： MICROSECOND  SECOND  MINUTE HOUR  DAY WEEK MONTH  QUARTER YEAR DAY_MINUTE  DAY_HOUR YEAR_MONTH</td>
<td>SELECT DATE_ADD(“2017-06-15”, INTERVAL 10 DAY);  SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL 15 MINUTE); SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR); SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR);</td>
</tr>
<tr>
<td>DATE_ADD(d，INTERVAL expr type)</td>
<td>计算起始日期 d 加上一个时间段后的日期，type 值可以是：  SECOND_MICROSECOND MINUTE_MICROSECOND  MINUTE_SECOND  HOUR_MICROSECOND  HOUR_SECOND  HOUR_MINUTE  DAY_MICROSECOND  DAY_SECOND  DAY_MINUTE  DAY_HOUR  YEAR_MONTH</td>
<td>SELECT DATE_ADD(“2017-06-15”, INTERVAL 10 DAY);    SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL 15 MINUTE);  SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR);  SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR);</td>
</tr>
<tr>
<td>EXTRACT(type FROM d)</td>
<td>从日期 d 中获取指定的值，type 指定返回的值。type可取值为： MICROSECOND  SECOND  MINUTE  HOUR</td>
<td>SELECT EXTRACT(MINUTE FROM ‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>LAST_DAY(d)</td>
<td>返回给给定日期的那一月份的最后一天</td>
<td>SELECT LAST_DAY(“2017-06-20”);</td>
</tr>
<tr>
<td>MAKEDATE(year, day-of-year)</td>
<td>基于给定参数年份 year 和所在年中的天数序号 day-of-year 返回一个日期</td>
<td>SELECT MAKEDATE(2017, 3);</td>
</tr>
<tr>
<td>YEAR(d)</td>
<td>返回年份</td>
<td>SELECT YEAR(“2017-06-15”);</td>
</tr>
<tr>
<td>MONTH(d)</td>
<td>返回日期d中的月份值，1 到 12</td>
<td>SELECT MONTH(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>DAY(d)</td>
<td>返回日期值 d 的日期部分</td>
<td>SELECT DAY(“2017-06-15”);</td>
</tr>
<tr>
<td>HOUR(t)</td>
<td>返回 t 中的小时值</td>
<td>SELECT HOUR(‘1:2:3’)</td>
</tr>
<tr>
<td>MINUTE(t)</td>
<td>返回 t 中的分钟值</td>
<td>SELECT MINUTE(‘1:2:3’)</td>
</tr>
<tr>
<td>SECOND(t)</td>
<td>返回 t 中的秒钟值</td>
<td>SELECT SECOND(‘1:2:3’)</td>
</tr>
<tr>
<td>QUARTER(d)</td>
<td>返回日期d是第几季节，返回 1 到 4</td>
<td>SELECT QUARTER(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>MONTHNAME(d)</td>
<td>返回日期当中的月份名称，如 November</td>
<td>SELECT MONTHNAME(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>MONTH(d)</td>
<td>返回日期d中的月份值，1 到 12</td>
<td>SELECT MONTH(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>DAYNAME(d)</td>
<td>返回日期 d 是星期几，如 Monday,Tuesday</td>
<td>SELECT DAYNAME(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>DAYOFMONTH(d)</td>
<td>计算日期 d 是本月的第几天</td>
<td>SELECT DAYOFMONTH(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>DAYOFWEEK(d)</td>
<td>日期 d 今天是星期几，1 星期日，2 星期一，以此类推</td>
<td>SELECT DAYOFWEEK(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>DAYOFYEAR(d)</td>
<td>计算日期 d 是本年的第几天</td>
<td>SELECT DAYOFYEAR(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>WEEK(d)</td>
<td>计算日期 d 是本年的第几个星期，范围是 0 到 53</td>
<td>SELECT WEEK(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>WEEKDAY(d)</td>
<td>日期 d 是星期几，0 表示星期一，1 表示星期二</td>
<td>SELECT WEEKDAY(“2017-06-15”);</td>
</tr>
<tr>
<td>WEEKOFYEAR(d)</td>
<td>计算日期 d 是本年的第几个星期，范围是 0 到 53</td>
<td>SELECT WEEKOFYEAR(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>YEARWEEK(date, mode)</td>
<td>返回年份及第几周（0到53），mode 中 0 表示周天，1表示周一，以此类推</td>
<td>SELECT YEARWEEK(“2017-06-15”);</td>
</tr>
<tr>
<td>NOW()</td>
<td>返回当前日期和时间</td>
<td>SELECT NOW()</td>
</tr>
<tr>
<td>WEEK(d)</td>
<td>计算日期 d 是本年的第几个星期，范围是 0 到 53</td>
<td>SELECT WEEK(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>WEEKDAY(d)</td>
<td>日期 d 是星期几，0 表示星期一，1 表示星期二</td>
<td>SELECT WEEKDAY(“2017-06-15”);</td>
</tr>
<tr>
<td>WEEKOFYEAR(d)</td>
<td>计算日期 d 是本年的第几个星期，范围是 0 到 53</td>
<td>SELECT WEEKOFYEAR(‘2011-11-11 11:11:11’)</td>
</tr>
<tr>
<td>YEARWEEK(date, mode)</td>
<td>返回年份及第几周（0到53），mode 中 0 表示周天，1表示周一，以此类推</td>
<td>SELECT YEARWEEK(“2017-06-15”);</td>
</tr>
<tr>
<td>NOW()</td>
<td>返回当前日期和时间</td>
<td>SELECT NOW()</td>
</tr>
</tbody></table>
<h3 id="7-控制流函数"><a href="#7-控制流函数" class="headerlink" title="7.控制流函数"></a>7.控制流函数</h3><ul>
<li>if逻辑判断语句</li>
</ul>
<table>
<thead>
<tr>
<th>格式</th>
<th>解释</th>
<th>案例</th>
</tr>
</thead>
<tbody><tr>
<td>IF(expr,v1,v2)</td>
<td>如果表达式expr成立，返回结果v1；否则，返回结果v2</td>
<td>SELECT IF(1&gt;0,’正确’,’错误’)</td>
</tr>
<tr>
<td>IFNULL(v1,v2)</td>
<td>如果v1的值不为NULL ，则返回 v1，否则返回 v2。</td>
<td>SELECT IFNULL(null,’Hello Word’)</td>
</tr>
<tr>
<td>ISNULL(expression)</td>
<td>判断表达式是否为 NULL</td>
<td>SELECT ISNULL(NULL);</td>
</tr>
<tr>
<td>NULLIF(expr1,expr2)</td>
<td>比较两个字符串，如果字符串 expr1 与 expr2 相等 返回 NULL，否则返回 expr1</td>
<td>SELECT NULLIF(25, 25);</td>
</tr>
</tbody></table>
<ul>
<li>case when 语句</li>
</ul>
<table>
<thead>
<tr>
<th><strong>格式</strong></th>
<th><strong>解释</strong></th>
<th><strong>操作</strong></th>
</tr>
</thead>
<tbody><tr>
<td>CASE expression     WHEN condition1 THEN result1  WHEN condition2 THEN result2     WHEN conditionN THEN resultN</td>
<td>CASE 表示函数开始，END 表示函数结束。如果 condition1 成立，则返回 result1, 如果 condition2 成立，则返回 result2，当全部不成立则返回 result，而当有一个成立之后，后面的就不执行了。</td>
<td>select case 100 when 50 then ‘tom’ when 100 then ‘mary’else ‘tim’ end ;</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">use mydb4; <br>-- 创建订单表<br>create table orders(<br> oid int primary key, -- 订单id<br> price double, -- 订单价格<br> payType int -- 支付类型(1:微信支付 2:支付宝支付 3:银行卡支付 4：其他)<br>);<br> <br>insert into orders values(1,1200,1);<br>insert into orders values(2,1000,2);<br>insert into orders values(3,200,3);<br>insert into orders values(4,3000,1);<br>insert into orders values(5,1500,2);<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 方式1<br>select <br>*  ,<br>case <br>  when payType&#x3D;1 then &#39;微信支付&#39; <br>    when payType&#x3D;2 then &#39;支付宝支付&#39; <br>    when payType&#x3D;3 then &#39;银行卡支付&#39; <br>    else &#39;其他支付方式&#39; <br>end  as payTypeStr<br>from orders;<br>-- 方式2<br>select <br>*  ,<br>case payType<br>  when 1 then &#39;微信支付&#39; <br>    when 2 then &#39;支付宝支付&#39; <br>    when 3 then &#39;银行卡支付&#39; <br>    else &#39;其他支付方式&#39; <br>end  as payTypeStr<br>from orders;<br></code></pre></td></tr></table></figure>

<h3 id="8-窗口函数"><a href="#8-窗口函数" class="headerlink" title="8.窗口函数"></a>8.窗口函数</h3><h4 id="（1）介绍"><a href="#（1）介绍" class="headerlink" title="（1）介绍"></a>（1）介绍</h4><ul>
<li>ySQL 8.0 新增窗口函数，窗口函数又被称为开窗函数，与Oracle 窗口函数类似，属于MySQL的一大特点</li>
<li>非聚合窗口函数是相对于聚函数来说的。聚合函数是对一组数据计算后返回单个值（即分组），非聚合函数一次只会处理一行数据。窗口聚合函数在行记录上计算某个字段的结果时，可将窗口范围内的数据输入到聚合函数中，并不改变行数</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/1d3dea6c619243dfbf72d6f4f5354311.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p>####（2）分类</p>
<p><img src="https://img-blog.csdnimg.cn/ac20b73ccd634259bb1018c79fb78e84.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<p><strong>另外还有开窗聚合函数: SUM,AVG,MIN,MAX</strong></p>
<h4 id="（3）语法结构"><a href="#（3）语法结构" class="headerlink" title="（3）语法结构"></a>（3）语法结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">window_function ( expr ) OVER ( <br>  PARTITION BY ... <br>  ORDER BY ... <br>  frame_clause <br>)<br></code></pre></td></tr></table></figure>

<p>其中，window_function 是窗口函数的名称；expr 是参数，有些函数不需要参数；OVER子句包含三个选项</p>
<ul>
<li><p>分区（PARTITION BY）</p>
<p>PARTITION BY选项用于将数据行拆分成多个分区（组），它的作用类似于GROUP BY分组。如果省略了 PARTITION BY，所有的数据作为一个组进行计算</p>
</li>
<li><p>排序（ORDER BY）</p>
<p>OVER 子句中的ORDER BY选项用于指定分区内的排序方式，与 ORDER BY 子句的作用类似</p>
</li>
<li><p>以及窗口大小（frame_clause）</p>
<p>frame_clause选项用于在当前分区内指定一个计算窗口，也就是一个与当前行相关的数据子集</p>
</li>
</ul>
<h4 id="（4）序号函数"><a href="#（4）序号函数" class="headerlink" title="（4）序号函数"></a>（4）序号函数</h4><p>序号函数有三个：ROW_NUMBER()、RANK()、DENSE_RANK()，可以用来实现分组排序，并添加序号</p>
<ul>
<li>格式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">row_number()|rank()|dense_rank() over ( <br>  partition by ... <br>  order by ... <br>) <br></code></pre></td></tr></table></figure>

<ul>
<li>操作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">use mydb4; <br>create table employee( <br>   dname varchar(20), -- 部门名 <br>   eid varchar(20), <br>   ename varchar(20), <br>   hiredate date, -- 入职日期 <br>   salary double -- 薪资<br>);<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">insert into employee values(&#39;研发部&#39;,&#39;1001&#39;,&#39;刘备&#39;,&#39;2021-11-01&#39;,3000);<br>insert into employee values(&#39;研发部&#39;,&#39;1002&#39;,&#39;关羽&#39;,&#39;2021-11-02&#39;,5000);<br>insert into employee values(&#39;研发部&#39;,&#39;1003&#39;,&#39;张飞&#39;,&#39;2021-11-03&#39;,7000);<br>insert into employee values(&#39;研发部&#39;,&#39;1004&#39;,&#39;赵云&#39;,&#39;2021-11-04&#39;,7000);<br>insert into employee values(&#39;研发部&#39;,&#39;1005&#39;,&#39;马超&#39;,&#39;2021-11-05&#39;,4000);<br>insert into employee values(&#39;研发部&#39;,&#39;1006&#39;,&#39;黄忠&#39;,&#39;2021-11-06&#39;,4000);<br> <br>insert into employee values(&#39;销售部&#39;,&#39;1007&#39;,&#39;曹操&#39;,&#39;2021-11-01&#39;,2000);<br>insert into employee values(&#39;销售部&#39;,&#39;1008&#39;,&#39;许褚&#39;,&#39;2021-11-02&#39;,3000);<br>insert into employee values(&#39;销售部&#39;,&#39;1009&#39;,&#39;典韦&#39;,&#39;2021-11-03&#39;,5000);<br>insert into employee values(&#39;销售部&#39;,&#39;1010&#39;,&#39;张辽&#39;,&#39;2021-11-04&#39;,6000);<br>insert into employee values(&#39;销售部&#39;,&#39;1011&#39;,&#39;徐晃&#39;,&#39;2021-11-05&#39;,9000);<br>insert into employee values(&#39;销售部&#39;,&#39;1012&#39;,&#39;曹洪&#39;,&#39;2021-11-06&#39;,6000);<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 对每个部门的员工按照薪资排序，并给出排名<br>select <br>dname,<br>ename,<br>salary,<br>row_number() over(partition by dname order by salary desc) as rn <br>from employee;<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/35712bfd8a1b4e5487ed625ee19c41c3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_6,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 对每个部门的员工按照薪资排序，并给出排名 rank<br>select <br>dname,<br>ename,<br>salary,<br>rank() over(partition by dname order by salary desc) as rn <br>from employee;<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/b6dd5a2cf04a4cfba5532db1325c4daa.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_7,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 对每个部门的员工按照薪资排序，并给出排名 dense-rank<br>select <br>dname,<br>ename,<br>salary,<br>dense_rank() over(partition by dname order by salary desc) as rn <br>from employee;<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/af3abf5d2a81481ebd9f469c9057c185.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_7,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">--求出每个部门薪资排在前三名的员工- 分组求TOPN<br>select <br>* <br>from <br>(<br>    select <br>     dname,<br>     ename,<br>     salary,<br>     dense_rank() over(partition by dname order by salary desc)  as rn<br>    from employee<br>)t<br>where t.rn &lt;&#x3D; 3<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/fbbf031b9e8f42a6aa28b992520ca05c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_7,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 对所有员工进行全局排序（不分组）<br>-- 不加partition by表示全局排序<br>select <br>     dname,<br>     ename,<br>     salary,<br>     dense_rank() over( order by salary desc)  as rn<br>from employee;<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/b650ffb7e4d248ca9549fb33a5593bf5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_7,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<h4 id="（5）开创聚合函数-SUM，AVG，MIN，MAX"><a href="#（5）开创聚合函数-SUM，AVG，MIN，MAX" class="headerlink" title="（5）开创聚合函数 - SUM，AVG，MIN，MAX"></a>（5）开创聚合函数 - SUM，AVG，MIN，MAX</h4><ul>
<li>概念</li>
</ul>
<p>在窗口中每条记录动态地应用聚合函数（SUM()、AVG()、MAX()、MIN()、COUNT()），可以动态计算在指定的窗口内的各种聚合函数值</p>
<ul>
<li>操作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select  <br> dname,<br> ename,<br> salary,<br> sum(salary) over(partition by dname order by hiredate) as pv1 <br>from employee;<br> <br>select cookieid,createtime,pv,<br>sum(pv) over(partition by cookieid) as pv3<br>from itcast_t1;  -- 如果没有order  by排序语句  默认把分组内的所有数据进行sum操作<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select  <br> dname,<br> ename,<br> salary,<br> sum(salary) over(partition by dname order by hiredate  rows between unbounded preceding and current row) as c1 <br>from employee;<br> <br>select  <br> dname,<br> ename,<br> salary,<br> sum(salary) over(partition by dname order by hiredate   rows between 3 preceding and current row) as c1 <br>from employee;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select  <br> dname,<br> ename,<br> salary,<br> sum(salary) over(partition by dname order by hiredate   rows between 3 preceding and 1 following) as c1 <br>from employee;<br>select  <br> dname,<br> ename,<br> salary,<br> sum(salary) over(partition by dname order by hiredate   rows between current row and unbounded following) as c1 <br>from employee;<br></code></pre></td></tr></table></figure>

<h4 id="（6）分布函数-CUME-DIST和PERCENT-RANK"><a href="#（6）分布函数-CUME-DIST和PERCENT-RANK" class="headerlink" title="（6）分布函数 - CUME_DIST和PERCENT_RANK"></a>（6）分布函数 - CUME_DIST和PERCENT_RANK</h4><ul>
<li><p>介绍 - CUME_DIST</p>
<p>用途：分组内小于、等于当前rank值的行数 / 分组内总行数</p>
<p>应用场景：查询小于等于当前薪资（salary）的比例</p>
</li>
<li><p>操作</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select  <br> dname,<br> ename,<br> salary,<br> cume_dist() over(order by salary) as rn1, -- 没有partition语句 所有的数据位于一组<br> cume_dist() over(partition by dept order by salary) as rn2 <br>from employee;<br> <br>&#x2F;*<br>rn1: 没有partition,所有数据均为1组，总行数为12，<br>     第一行：小于等于3000的行数为3，因此，3&#x2F;12&#x3D;0.25<br>     第二行：小于等于4000的行数为5，因此，5&#x2F;12&#x3D;0.4166666666666667<br>rn2: 按照部门分组，dname&#x3D;&#39;研发部&#39;的行数为6,<br>     第一行：研发部小于等于3000的行数为1，因此，1&#x2F;6&#x3D;0.16666666666666666<br>*&#x2F;<br></code></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/69110f0eb0ae4adabe93d51f2aa4695a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFv6KaB5Yqq5Yqb5aWL5paX,size_12,color_FFFFFF,t_70,g_se,x_16" srcset="/img/loading.gif" lazyload></p>
<h2 id="MySQL的视图"><a href="#MySQL的视图" class="headerlink" title="MySQL的视图"></a>MySQL的视图</h2><h3 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1. 介绍"></a>1. 介绍</h3><ul>
<li>视图（view）是一个虚拟表，非真实存在，其本质是根据SQL语句获取动态的数据集，并为其命名，用户使用时只需使用视图名称即可获取结果集，并可以将其当作表来使用</li>
<li>数据库中只存放了视图的定义，而并没有存放视图中的数据。这些数据存放在原来的表中。</li>
<li>使用视图查询数据时，数据库系统会从原来的表中取出对应的数据。因此，视图中的数据是依赖于原来的表中的数据的。一旦表中的数据发生改变，显示在视图中的数据也会改变</li>
</ul>
<h3 id="2-作用"><a href="#2-作用" class="headerlink" title="2.作用"></a>2.作用</h3><ul>
<li>简化代码，可以把重复使用的查询封装成视图重复使用，同时可以使复杂的查询易于理解和使用。</li>
<li>安全原因，如果一张表中又很多数据，很多信息不希望让所有人看到，此时可以使用视图，如：社会保险基金表，可以用视图只显示姓名，地址，而不显示社会保险号和工资等，可以对不同的用户，设定不同的视图。</li>
</ul>
<h3 id="3-视图的创建"><a href="#3-视图的创建" class="headerlink" title="3.视图的创建"></a>3.视图的创建</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create [or replace] [algorithm &#x3D; &#123;undefined | merge | temptable&#125;]<br>view view_name [(column_list)]<br>as select_statement<br>[with [cascaded | local] check option]<br></code></pre></td></tr></table></figure>

<p>（1）algorithm：可选项，表示视图选择的算法</p>
<p>（2）view_name：表示要创建的视图名称</p>
<p>（3）column_list：可选项，指定视图中各个属性的名词，默认情况下与SELECT语句中的查询的属性相同</p>
<p>（4）select_statement：表示一个完整的查询语句，将查询记录导入视图中</p>
<p>（5）[with [cascaded | local] check option]：可选项表示更新视图时要保证在该视图的权限范围内</p>
<ul>
<li>操作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create or replace view view1_emp<br>as<br>select ename,job from emp;<br>-- 查看表和视图<br>show full tables;<br></code></pre></td></tr></table></figure>

<h3 id="4-修改视图"><a href="#4-修改视图" class="headerlink" title="4.修改视图"></a>4.修改视图</h3><p>修改视图是指修改数据库中已存在的表的定义。当基本表的某些字段发生改变时，可以通过修改视图来保持视图和基本表之间的一致。MySQL中通过CREATE OR REPLACE VIEW语句和ALTER VIEW语句来修改视图</p>
<ul>
<li>格式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter view 视图名 as select语句<br></code></pre></td></tr></table></figure>

<ul>
<li>操作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter view view_emp<br>as<br>select a.deptno,a.dname,a.loc,b.ename,b.sal from dept a,emp b where a.deptno &#x3D; b.deptno;<br></code></pre></td></tr></table></figure>

<h3 id="5-更新视图"><a href="#5-更新视图" class="headerlink" title="5.更新视图"></a>5.更新视图</h3><p>某些视图是可更新的。也就是说，可以在UPDATE、DELETE或INSERT等语句中使用它们，以更新基表的内容。对于可更新的视图，在视图中的行和基表中的行之间必须具有一对一的关系。如果视图包含下述结构中的任何一种，那么它是不可更新的：</p>
<ul>
<li>聚合函数（SUM(),MIN(),MAX(),COUNT()等）</li>
<li>DISTINCT</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>UNION或UNION ALL</li>
<li>位于选择列表中的子查询</li>
<li>JOIN</li>
<li>FROM子句中的不可更新视图</li>
<li>WHERE子句中的子查询，引用FROM子句中的表</li>
<li>仅引用文字值（在该情况下，没有要更新的基本表）</li>
</ul>
<p><strong>视图中虽然可以更新数据，但是有很多的限制。一般情况下，最好将视图作为查询数据的虚拟表，而不要通过视图表更新数据。因为，使用视图更新数据时，如果没有全面考虑在视图中更新数据的限制，就可能会造成数据更新失败</strong></p>
<h3 id="6-其他操作"><a href="#6-其他操作" class="headerlink" title="6.其他操作"></a>6.其他操作</h3><ul>
<li>重命名视图</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- rename table 视图名 to 新视图名<br>rename table view1_emp to my_view1<br></code></pre></td></tr></table></figure>

<ul>
<li>删除视图</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- drop view 视图名[,视图名...];<br>drop view if exists view_student;<br></code></pre></td></tr></table></figure>

<p>删除视图时，只能删除视图的定义，不会删除数据</p>
<h2 id="MySQL的存储过程"><a href="#MySQL的存储过程" class="headerlink" title="MySQL的存储过程"></a>MySQL的存储过程</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1.概述"></a>1.概述</h3><ul>
<li>MySQL 5.0版本开始支持存储过程</li>
<li>简单地说，存储过程就是一组SQL语句集，功能强大，可以实现一些比较复杂的逻辑功能，类似于JAVA语言中的方法</li>
<li>存储过就是数据库SQL语言层面的代码封装与重用</li>
</ul>
<h3 id="2-特性"><a href="#2-特性" class="headerlink" title="2.特性"></a>2.特性</h3><ul>
<li>有输入输出参数，可以声明变量，有if/else，case，while等控制语句，通过编写存储过程，可以实现复杂的存储功能</li>
<li>函数的普遍特性：模块化，封装，代码复用</li>
<li>速度快，只有首次执行需经过编译和优化步骤，后续被调用可以直接执行，省去以上步骤</li>
</ul>
<h3 id="3-格式"><a href="#3-格式" class="headerlink" title="3.格式"></a>3.格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs MySQL">delimiter 自定义结束符号<br>create procedure 存储名([in,out,inout] 参数名 数据类型...)<br>begin<br>	sql语句<br>end 自定义的结束符号<br>delimiter ；<br></code></pre></td></tr></table></figure>

<h3 id="4-MySQL操作-变量定义"><a href="#4-MySQL操作-变量定义" class="headerlink" title="4.MySQL操作-变量定义"></a>4.MySQL操作-变量定义</h3><h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><p>用户自定义，在begin/end块内有效</p>
<p>语法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">声明变量 declare var_name type [defalut var_vaule];<br>举例： declare nickname varchar(32);<br></code></pre></td></tr></table></figure>

<p>操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">delimiter $$<br>create procedure proc02()<br>begin<br>	declare var_name01 varchar(20) default &#39;aaa&#39;;<br>	set var_name01 &#x3D; &#39;zhangsan&#39;;<br>	select var_name01;<br>end $$<br>-- 调用存储过程<br>call proc02();<br></code></pre></td></tr></table></figure>

<p>MySQL中还可以使用select…into语句为变量赋值。其基本语句如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select col_name [...] into var_name[,...]<br>from table_name where condition<br></code></pre></td></tr></table></figure>

<p>其中：</p>
<p>col_name 参数表示查询的字段名称</p>
<p>var_name 参数是变量名称</p>
<p>table_name参数指表的名称</p>
<p>condition 参数指查询条件</p>
<p><strong>注意 当查询结果赋值给变量时，该查询语句的返回结果只能是单行单列</strong></p>
<p>语法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">delimiter $$<br>create procedure proc03()<br>begin<br>	declare my_ename varchar(20);<br>	select ename into my_ename from emp where empno &#x3D; 1001;<br>	select my_ename;<br>end $$<br>-- 调用存储过程<br>call proc03()<br></code></pre></td></tr></table></figure>

<h4 id="用户变量"><a href="#用户变量" class="headerlink" title="用户变量"></a>用户变量</h4><p>用户自定义，当前会话(连接)有效。类比java的成员变量</p>
<p>语法</p>
<p>@var_name</p>
<p>不需要提前声明，使用即声明</p>
<p>操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">delimiter $$<br>create procedure proc04()<br>begin<br>	set @var_name01 &#x3D; &#39;ZS&#39;;<br>end $$<br>call proc04() $$<br>select @var_name01 $$<br></code></pre></td></tr></table></figure>

<h4 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h4><ul>
<li>系统变量又分为全局变量和会话变量</li>
<li>全局变量在MySQL启动的时候由服务器自动将它们初始化为默认值，这些默认值可以通过更改my.ini这个文件来更改</li>
<li>会话变量在每次建立一个新的连接的时候，由MySQL来初始化。MySQL会将当前所有全局变量的值复制一份。来作为会话变量</li>
<li>也就是说，如果在建立会话以后，没有手动更改过会话变量和全局变量的值，那所有这些变量的值都是一样的。</li>
<li>全局变量与会话变量的区别就在于，对全局变量的修改会影响到整个服务器，但是对会话变量的修改，只会影响到当前会话（也就是当前的数据库连接）</li>
<li>有些系统变量的值可以利用语句来动态进行更改的，但是有些系统变量的值却只是只读的，对于那些可以更改的系统变量，我们可以利用set语句进行更改</li>
</ul>
<h5 id="系统变量-全局变量"><a href="#系统变量-全局变量" class="headerlink" title="系统变量 - 全局变量"></a>系统变量 - 全局变量</h5><p>由系统提供，在整个数据库有效</p>
<p>格式</p>
<p>@@global.var_name</p>
<p>操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs MysQL">-- 查看全局变量<br>show global variables;<br>-- 查看某全局变量<br>select @@global.auto increment increment;<br>-- 修改全局变量的值<br>set global sort_buffer_size &#x3D; 40000;<br>set @@global.sort_buffer_size &#x3D; 40000;<br></code></pre></td></tr></table></figure>

<h5 id="系统变量-会话变量"><a href="#系统变量-会话变量" class="headerlink" title="系统变量 - 会话变量"></a>系统变量 - 会话变量</h5><p>由系统提供，当前会话(连接)有效</p>
<p>语法</p>
<p>@@session.var_name</p>
<p>操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查看会话变量<br>show session variables;<br>-- 查看某会话变量<br>select @@session.auto_increment_increment;<br>-- 修改会话变量的值<br>set session sort_buffer_size &#x3D; 50000;<br>set @@session.sort_buffer_size &#x3D; 50000;<br></code></pre></td></tr></table></figure>

<h4 id="存储过程传参-in"><a href="#存储过程传参-in" class="headerlink" title="存储过程传参 - in"></a>存储过程传参 - in</h4><p>in表示传入的参数，可以传入数值或者变量，即使传入变量，并不会更改变量的值，可以内部更改，仅仅作用在函数范围内</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 封装有参数的存储过程，传入员工编号，查找员工信息<br>delimiter &amp;&amp;<br>create procedure dec_param01(in param_empno varchar(20))<br>begin<br>	select * from emp where empno &#x3D; param_empno;<br>end $$<br>delimiter ;<br>call dec_param01(&#39;1001&#39;);<br></code></pre></td></tr></table></figure>

<h4 id="存储过程传参-out"><a href="#存储过程传参-out" class="headerlink" title="存储过程传参 - out"></a>存储过程传参 - out</h4><p>out表示从存储过程内部传值给调用者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 封装有参数的存储过程，传入员工编号，返回员工名字<br>delimiter $$<br>create procedure proc08(in empno int,out out_name varchar(50))<br>begin<br>	select enmae into out_ename from emp where emp.empno &#x3D; empno;<br>end $$<br>delimiter ;<br>call proc08(1001,@o_ename);<br>select @o_ename;<br></code></pre></td></tr></table></figure>

<h4 id="存储过程传参-inout"><a href="#存储过程传参-inout" class="headerlink" title="存储过程传参 - inout"></a>存储过程传参 - inout</h4><p>inout 表示从外部传入的参数经过修改后可以返回的变量，既可以使用传入变量的值也可以修改变量的值（即使函数执行完）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 传入员工名，拼接部门号，传入薪资，求出年薪<br>delimiter $$<br>create procedure proc10(inout inout_ename varchar(50),inout inout_sal int)<br>begin <br>	select concat(deptno,&quot;_&quot;,inout_ename) into inout_ename from emp where ename &#x3D; inout_sal * 12;<br>end $$<br>delimiter ;<br>set @inout_ename &#x3D; &#39;关羽&#39;;<br>set @inout_sal &#x3D; 3000;<br>call proc10(@inout_ename,@inout_sal);<br>select @inout_ename;<br>select @inout_sal;<br></code></pre></td></tr></table></figure>

<h4 id="流程控制-判断"><a href="#流程控制-判断" class="headerlink" title="流程控制 - 判断"></a>流程控制 - 判断</h4><p>IF语句包含多个条件判断，根据结果为TURE、FALSE执行语句，与编程语言中的if、else if、else语法类似，其语法格式如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 语法<br>if search_condition_1 then statemnet_list_1<br>	[elseif search_condition_2 then statement_list_2]<br>	[else statement_list_n]<br>end if<br></code></pre></td></tr></table></figure>

<h4 id="流程控制-case"><a href="#流程控制-case" class="headerlink" title="流程控制 - case"></a>流程控制 - case</h4><p>case是另一个条件判断语句，类似于编程语言中的switch语法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 语法一<br>case case_value<br>	when when_value then statement_list<br>	[when when_value then statement_list] ...<br>	[else statement_list]<br>end case<br>-- 语法二<br>case <br>	when search_condition then statement_list<br>	[when search_condition then statement_list] ...<br>	[else statement_list]<br>end case<br></code></pre></td></tr></table></figure>

<h4 id="流程控制-循环"><a href="#流程控制-循环" class="headerlink" title="流程控制 - 循环"></a>流程控制 - 循环</h4><ul>
<li>循环是一段在程序中只出现一次，但可能会连续运行多次的代码</li>
<li>循环中的代码会运行特定的次数，或者是运行到特定条件成立时结束循环</li>
</ul>
<p><strong>循环分类</strong></p>
<p>while</p>
<p>repeat</p>
<p>loop</p>
<p><strong>循环控制</strong></p>
<p>leave类似于break，跳出，结束当前所在的循环</p>
<p>iterate类似于continue，继续，结束本次循环，继续下一次</p>
<p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">[标签:] while 循环条件 do<br>	循环体;<br>end while [标签]；<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">[标签:]repeat<br>	循环体;<br>until 条件表达式<br>end repeat [标签];<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">[标签:] loop<br>	循环体;<br>	if 条件表达式 then<br>		leave [标签]；<br>	end if<br>end loop;<br></code></pre></td></tr></table></figure>

<h3 id="5-游标"><a href="#5-游标" class="headerlink" title="5.游标"></a>5.游标</h3><p>游标（cursor）是用来存储查询结果集的数据类型，在存储过程和函数中可以使用光标对结果集进行循环的处理。光标的使用包括光标的声明、open、fetch和close</p>
<p><strong>格式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 声明语法<br>declare cursor_name cursor for select_statement<br>-- 打开语法<br>open cursor_name<br>-- 取值语法<br>fetch cursor_name into var_name [, var_name]...<br>-- 关闭语法<br>close cursor_name<br></code></pre></td></tr></table></figure>

<h3 id="6-异常处理-HANDLER句柄"><a href="#6-异常处理-HANDLER句柄" class="headerlink" title="6.异常处理 - HANDLER句柄"></a>6.异常处理 - HANDLER句柄</h3><p>Mysql存储过程也提供了对异常处理的功能：通过自定义HANDLER来完成异常声明的实现</p>
<ul>
<li>格式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DECLARE handler_action HANDLER<br>	FOR condition_value [, condition_value]...<br>	statement<br>handler_action:&#123;<br>	CONTINUE<br>    | EXIT<br>    | UNDO<br>&#125;<br>condition_value:&#123;<br>	mysql_error_code<br>	| condition_name<br>	| SQLWARNING<br>	| NOT FOUND<br>	| SQLEXCEPTION<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="MySQL的触发器"><a href="#MySQL的触发器" class="headerlink" title="MySQL的触发器"></a>MySQL的触发器</h2><ul>
<li>触发器，就是一种特殊的存储过程。触发器和存储过程一样是一个能够完成特定功能、存储在数据库服务器上的SQL片段，但是触发器无需调用，当对数据库表中的数据执行DML操作时自动触发这个SQL片段的执行，无需手动调用</li>
<li>在MySQL中，只有执行insert，delete，update操作时才能触发触发器的执行</li>
<li>触发器的这种特性可以协助应用在数据库端确保数据的完整性，日志记录，数据校验等操作</li>
<li>使用别名OLD和NEW来引用触发器中发生变化的记录内容，这与其它的数据库是相似的。现在触发器还只支持行级触发，不支持语句级触发</li>
</ul>
<h3 id="创建触发器-基本操作"><a href="#创建触发器-基本操作" class="headerlink" title="创建触发器 - 基本操作"></a>创建触发器 - 基本操作</h3><p>创建只有一个执行语句的触发器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create trigger 触发器名 before|after 触发事件<br>on 表名 for each row<br>执行语句;<br></code></pre></td></tr></table></figure>

<p>创建有多个执行语句的触发器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create trigger 触发器名 before|after 触发事件<br>on 表名 for each row<br>begin<br>	执行语句列表<br>end;<br></code></pre></td></tr></table></figure>

<h3 id="创建触发器-NEW与OLD"><a href="#创建触发器-NEW与OLD" class="headerlink" title="创建触发器 - NEW与OLD"></a>创建触发器 - NEW与OLD</h3><p>MySQL中定义了NEW和OLD，用来表示触发器的所在表中，触发了触发器的那一行数据，来引用触发器中发生变化的记录内容，具体的</p>
<table>
<thead>
<tr>
<th>触发器类型</th>
<th>触发器类型NEW和OLD的使用</th>
</tr>
</thead>
<tbody><tr>
<td>INSERT型触发器</td>
<td>NEW表示将要或者已经新增的数据</td>
</tr>
<tr>
<td>UPDATE型触发器</td>
<td>OLD表示修改之前的数据，NEW表示或已经修改后的数据</td>
</tr>
<tr>
<td>DELETE型触发器</td>
<td>OLD表示将要或者已经删除的数据</td>
</tr>
</tbody></table>
<p><strong>使用方法</strong></p>
<p>​    NEW.columnName(columnName为相应数据表某一列名)</p>
<h3 id="触发器其他操作"><a href="#触发器其他操作" class="headerlink" title="触发器其他操作"></a>触发器其他操作</h3><p>查看触发器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">show triggers;<br></code></pre></td></tr></table></figure>

<p>删除触发器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop trigger if exists trigger_test1;<br></code></pre></td></tr></table></figure>

<h3 id="触发器注意事项"><a href="#触发器注意事项" class="headerlink" title="触发器注意事项"></a>触发器注意事项</h3><ul>
<li>MySQL中触发器不能对本表进行insert、update、delete操作，以免递归循环触发</li>
<li>尽量少使用触发器，假设触发器触发每次执行1s，insert table 500条数据，那么就需要触发500次触发器，光是触发器执行的时间就花费了500s。而insert 500条数据一共1s，那么这个insert的效率就非常低了</li>
<li>触发器是针对每一行的；对增删改非常频繁的表上切记不要使用触发器，因为它非常消耗资源</li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/MySQL/">MySQL</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/MySQL/">MySQL</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/01/04/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E9%AB%98%E7%BA%A7-%EF%BC%88%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E3%80%81%E7%B4%A2%E5%BC%95%EF%BC%89/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MySQL数据库高级 - （存储引擎、索引）</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/12/17/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C-%EF%BC%88DML%E3%80%81MySQL%E7%BA%A6%E6%9D%9F%E3%80%81DQL%EF%BC%89/">
                        <span class="hidden-mobile">MySQL数据库基本操作 - （DML、MySQL约束、DQL）</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.lazyComments('valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#valine",
          app_id: "99lfyqRg3CLazXoohVQjMwH3-gzGzoHsz",
          app_key: "qx9rFQuqjhuegpH6AwJ8B0eD",
          placeholder: "说点什么",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: false,
          recordIP: true,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
